---
title: One Line Atmospheric Scattering Shader
date: 2000-01-01 12:00:00 +0100
categories: [Article]
tags: [shader]
description: How to create a physically inspired atmosphere shader in one line of GLSL.
comments: false
math: true
---
Our goal in this article is to create a very simple sky texture that updates somewhat realistically as the position of the sun changes. To do this we will write a light scattering shader that will output a colour given the sunlight direction and our viewing direction. Typically volumetric scattering techniques like this require ray marching through the volume in a loop, taking samples. By making some assumptions we can simplify the equations to eliminate the need to sample at all.

## Rayleigh Scattering ##
This article won't go into detail 

## Assumptions
1. **Single scattering**: In reality, lightrays bounce around the atmosphere many times before reaching the observer. We can still get a reasonable demonstration of Rayleigh scattering by only considering rays that scatter a single time.
2. **Flat Earth**: If we assume the ground is a flat plane, then the height above that plane will vary linearly along a lightray. This is not the case for the height above the surface of a sphere and so this assumption will simplify things.

## Single Ray Contribution
Firstly lets consider a single ray that comes from the sun, scatters once in the atmosphere, and reaches the observer along the viewing direction.
![img-description](/assets/image.jpg)
_Image Caption_



$$
\int_{0}^{h}e^{-x}dx = 1 - e^{-h}
$$